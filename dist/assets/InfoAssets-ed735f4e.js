import{g as C,aj as w,h as i,ak as k,j as N,k as $,o as A,c as B,x as d,p,D as u,a4 as V,P as j,a8 as I}from"./vendor-a962175c.js";import{f as E,p as L}from"./index-11d2d6b3.js";import{g as P}from"./index-0b0e17b7.js";const U={class:"flex items-center justify-between pl-3 py-3.5 h-12"},W={class:"flex flex-wrap items-center"},D={class:"flex justify-center items-center"},q=C({__name:"InfoAssets",setup(H){const{t:n}=w(),s=i(""),t=i({page:1,pageSize:5}),v=k([{label:n("ep_home.asset_no"),prop:"assetNo",sortable:"custom",resizable:!0},{label:n("ep_home.asset_name"),prop:"assetName",sortable:"custom",resizable:!0},{label:n("ep_home.category"),prop:"categoryName",sortable:"custom",resizable:!0},{label:n("ep_home.template"),prop:"templateName",sortable:"custom",resizable:!0},{label:n("ep_home.inventory_status"),prop:"inventoryStatus",sortable:"custom",resizable:!0},{label:n("ep_home.service_status"),prop:"serviceStatus",sortable:"custom",resizable:!0}]),c=i(!1),g=i([]);let m=null;const _=()=>{s.value.trim()!==""&&l()},h=({prop:a,order:e})=>{m=e===null?null:e==="ascending"?a+" asc":a+" desc",l()},f=a=>{t.value.pageSize=a,l()},b=a=>{t.value.page=a,l()},l=async()=>{c.value=!0;const a=(t.value.page-1)*t.value.pageSize,e={$top:t.value.pageSize,$skip:a,$count:!0};m&&(e.$orderby=m),s.value&&(e.$filter=`contains(assetName,'${s.value.trim()}')`);const r=await P(e);c.value=!1,t.value.total=r.count,g.value=r.data};return N(()=>s.value,a=>{a.trim().length===0&&l()}),$(()=>{l()}),(a,e)=>{const r=E,x=L,z=V,y=j,S=I;return A(),B(S,{class:"w-full mb-2 overflow-hidden mt-3 enter-x","body-style":{padding:0,margin:"0 16px 16px"},shadow:"hover"},{header:d(()=>[p("div",U,[e[4]||(e[4]=p("div",{class:"h-9 text-[14px] font-bold text-left"},"资产",-1)),p("div",W,[u(r,{modelValue:s.value,"onUpdate:modelValue":[e[0]||(e[0]=o=>s.value=o),e[1]||(e[1]=o=>s.value=o)],onSearch:_,onEnter:_,minWidth:"w-[214px]"},null,8,["modelValue"])])])]),default:d(()=>[u(y,{loading:c.value,rows:4,throttle:500},{default:d(()=>[u(x,{class:"pb-3","header-cell-style":{height:"32px",padding:0,lineHeight:"16px",textAlign:"center",fontWeight:600,border:"none"},"cell-style":{textAlign:"center",borderBottomWidth:"0px",padding:"10px 0"},columns:v,data:g.value,"max-height":269,onSortChange:h},null,8,["columns","data"]),p("div",D,[u(z,{"current-page":t.value.page,"onUpdate:currentPage":e[2]||(e[2]=o=>t.value.page=o),"page-size":t.value.pageSize,"onUpdate:pageSize":e[3]||(e[3]=o=>t.value.pageSize=o),"page-sizes":[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper",total:t.value.total,onSizeChange:f,onCurrentChange:b},null,8,["current-page","page-size","total"])])]),_:1},8,["loading"])]),_:1})}}});export{q as default};
