import{h as J,M as o,b as U,e as K,_ as F}from"./index-11d2d6b3.js";import{g as H,ap as Q,aq as W,aj as X,h as Y,aA as N,i as h,o as l,m as u,y as Z,z as S,a6 as $,D as x,x as f,J as v,K as C,l as s,c as m,C as k,B as ee,t as j,p as w,a5 as R,N as B,aI as ne,aJ as oe,aw as te}from"./vendor-a962175c.js";import{u as ce}from"./service-0e8ab2f5.js";import"./index-8a0f43b8.js";const ae={class:"side-menu-wrapper"},ie={key:2,class:"w-4 h-4 ml-2 text-white rounded-full bg-[#EC1616] flex items-center justify-center text-[13px]"},le={class:"drop-wrapper px-[3px]"},se=["onClick"],re=["onClick"],pe=H({__name:"index",props:{collapsed:{type:Boolean,default:!1}},setup(y){const a=Q(),D=W(),{t:n}=X(),L=J(),b=Y(),{currentProject:A}=N(L),d=ce(),{getKnowledgeProjectId:V}=N(d),q=B(()=>U(()=>import("./ReSubmenu-e8071c63.js"),["assets/ReSubmenu-e8071c63.js","assets/vendor-a962175c.js","assets/vendor-9f745663.css","assets/index-11d2d6b3.js","assets/index-b7f84b08.css","assets/service-0e8ab2f5.js","assets/index-8a0f43b8.js","assets/ReSubmenu-39a9c139.css"])),T=B(()=>U(()=>import("./ReDropdown-873fb5fd.js"),["assets/ReDropdown-873fb5fd.js","assets/vendor-a962175c.js","assets/vendor-9f745663.css","assets/index-11d2d6b3.js","assets/index-b7f84b08.css","assets/ReDropdown-a84cbae1.css"])),z=h(()=>{var c;const t=d.serviceGroupList||[],r=((c=d.serviceCatalogList)==null?void 0:c.map(i=>({title:i.projectName,name:`/ep/service/counter/${i.projectId}`,noNeedIcon:!0,children:t.map(p=>({title:p.groupName,name:`/ep/service/counter/${p.projectID}/${p.groupID}`,noNeedIcon:!0}))})))||[];return[{title:n("layout.home"),name:"/ep/home",icon:"ep-common-ep_home",activeIcon:"ep-common-ep_home2",group:o.MODULE},{title:n("layout.service_directory"),name:"/ep/service",icon:"ep-common-ep_service",activeIcon:"ep-common-ep_service2",children:r},{title:n("layout.event_list"),name:"/ep/event",icon:"ep-common-ep_event",activeIcon:"ep-common-ep_event2",group:o.MODULE},{title:d.getCustomerAs,name:"/ep/userinfo",icon:"ep-common-ep_userinfo",activeIcon:"ep-common-ep_userinfo2",group:o.MODULE},{title:n("layout.knowledge_base"),name:"/ep/knowledge",icon:"ep-common-ep_knowledge",activeIcon:"ep-common-ep_knowledge2",group:o.MODULE,disabled:V.value==null},{title:n("layout.meeting_list"),name:"/ep/meeting",icon:"ep-common-ep_meeting",activeIcon:"ep-common-ep_meeting2",group:o.MODULE},{title:"智能AI客服",name:"/ep/chat",icon:"ep-common-icon_livesync",activeIcon:"ep-common-icon_livesync2",group:o.MODULE}]}),_=h(()=>a.path.indexOf("/ep")!==-1?z.value.filter(t=>!t.disabled):a.path.indexOf("/sp")!==-1&&n?[{title:n("layout.worktable"),name:"/sp/home",icon:"home",activeIcon:"home2"},{title:n("layout.module"),name:"module",icon:"moduleIcon",activeIcon:"moduleIcon2",unReadMessage:3,children:[{title:n("layout.event_management"),name:"/sp/event",icon:"eventIcon",activeIcon:"eventIcon2",group:o.MODULE},{title:n("layout.problem_management"),name:"/sp/problem",icon:"problemIcon",activeIcon:"problemIcon2",unReadMessage:3,group:o.MODULE},{title:n("layout.release_management"),name:"/sp/publish",icon:"publishIcon",activeIcon:"publishIcon2",group:o.MODULE},{title:n("layout.CMDB"),name:"/sp/cmdb",icon:"CMDB",activeIcon:"CMDB2",group:o.MODULE},{title:n("layout.project_management"),name:"/sp/management",icon:"manageIcon",activeIcon:"manageIcon2",group:o.MODULE},{title:"连续性管理",name:"/sp/continuity",icon:"continuityIcon",activeIcon:"continuityIcon2",group:o.MODULE},{title:"可用性管理",name:"/sp/availability",icon:"availabilityIcon",activeIcon:"availabilityIcon2",group:o.MODULE},{title:"HRSCC工单",name:"/sp/hrscc",icon:"hrsccIcon",activeIcon:"hrsccIcon2",group:o.MODULE}]},{title:n("layout.performance_analysis"),name:"/sp/performance",icon:"performanceIcon",activeIcon:"performanceIcon2",group:o.MODULE},{title:n("layout.knowledge_management"),name:"/sp/knowledge",icon:"knowledgeIcon",activeIcon:"knowledgeIcon2",group:o.MODULE},{title:n("layout.team_management"),name:"/sp/team",icon:"teamIcon",activeIcon:"teamIcon2",group:o.MODULE},{title:"文档管理",name:"/sp/document",icon:"documentIcon",activeIcon:"documentIcon2",group:o.MODULE},{title:"智能AI客服",name:"/sp/chat",icon:"liveSyncIcon",activeIcon:"liveSyncIcon2",group:o.MODULE},{title:n("layout.setting"),name:"/sp/setting",icon:"setIcon",activeIcon:"setIcon2"}]:a.path.indexOf("/admin")!==-1&&n?[{title:"首页",name:"/admin/home",icon:"home",activeIcon:"home2"},{title:"系统设置",name:"/admin/setting",icon:"setIcon",activeIcon:"setIcon2"},{title:"基础项目",name:"baseProject",icon:"moduleIcon",activeIcon:"moduleIcon2",children:[{title:n("layout.event_management"),name:"/admin/event",icon:"eventIcon",activeIcon:"eventIcon2"},{title:n("layout.problem_management"),name:"/admin/problem",icon:"problemIcon",activeIcon:"problemIcon2"},{title:"变更管理",name:"/admin/change",icon:"changeIcon",activeIcon:"changeIcon2"},{title:n("layout.release_management"),name:"/admin/publish",icon:"publishIcon",activeIcon:"publishIcon2"},{title:n("layout.CMDB"),name:"/admin/cmdb",icon:"CMDB",activeIcon:"CMDB2"},{title:n("layout.project_management"),name:"/admin/management",icon:"manageIcon",activeIcon:"manageIcon2"},{title:n("layout.demand_management"),name:"/admin/requirement",icon:"requirementIcon",activeIcon:"requirementIcon2"},{title:n("layout.quality_control"),name:"/admin/quality",icon:"qualityIcon",activeIcon:"qualityIcon2"},{title:n("layout.defect_management"),name:"/admin/defect",icon:"defectIcon",activeIcon:"defectIcon2"}]},{title:n("layout.knowledge_management"),name:"/admin/knowledge",icon:"knowledgeIcon",activeIcon:"knowledgeIcon2"}]:[]),P=h(()=>a.path.indexOf("/sp")>-1?a.path.replace(/^(\/[^\/]+\/[^\/]+)\/.*$/,"$1"):a.path),G=h(()=>{let t=[];return _.value.map(r=>{var c;(c=r.children)!=null&&c.length?t.push(...r.children):t.push(r)}),t}),E=t=>{b.value.close(t)},g=(t,r)=>{let c=[];_.value.map(i=>{var p;(p=i.children)!=null&&p.length?(c=[...c,...i.children],i.children.map(I=>{var e;(e=I.children)!=null&&e.length&&(c=[...c,...I.children])})):c.push(i)}),D.push({path:r}).then(()=>{L.addTagsViewList({...c.filter(i=>i.name==r)[0],group:o.MODULE,meta:a.meta})}),r.indexOf("/ep/service/counter/")!==-1&&a.params.id&&setTimeout(()=>{d.serviceCatalogList.forEach(i=>{i.projectId!==Number(a.params.id)&&E(`/ep/service/counter/${i.projectId}`)})},0)},O=t=>{a.path!=t&&D.push(t),g(1,t)};return(t,r)=>{const c=K,i=ne,p=oe,I=te;return l(),u("div",ae,[Z(t.$slots,"default",{},void 0,!0),S(x(p,{ref_key:"menuRef",ref:b,width:"auto",class:"!px-2","default-active":s(P),collapse:y.collapsed,"default-openeds":["module"],"collapse-transition":!1},{default:f(()=>[(l(!0),u(v,null,C(s(_),e=>(l(),u(v,{key:`menu_${e.name}1`},[e.children?(l(),m(s(q),{key:`menu_${e.name}`,parent:e,onSelect:g,onCloseMenu:E},null,8,["parent"])):(l(),m(i,{key:1,index:e.name,onClick:M=>g(M,e.name),class:"flex items-center group"},{default:f(()=>[e.noNeedIcon?k("",!0):(l(),m(c,{key:0,size:"18",iconClass:e.icon,className:`cursor-pointer text-[18px] mr-2 group-hover:hidden ${e.icon}`},null,8,["iconClass","className"])),!e.noNeedIcon&&e.activeIcon?(l(),m(c,{key:1,size:"18",iconClass:e.activeIcon,className:`cursor-pointer text-[18px] mr-2 group-hover:block hidden ${e.activeIcon}`},null,8,["iconClass","className"])):k("",!0),ee(" "+j(e.title)+" ",1),e.unReadMessage?(l(),u("div",ie,j(e.unReadMessage),1)):k("",!0)]),_:2},1032,["index","onClick"]))],64))),128))]),_:1},8,["default-active","collapse"]),[[$,!y.collapsed]]),S(w("div",le,[s(A)=="sp"?(l(!0),u(v,{key:0},C(s(G),e=>(l(),m(I,{key:`drop_${e.title}`,transfer:"",content:e.title,placement:"right",class:"w-full pb-[10px] pt-[10px]"},{default:f(()=>[w("div",{onClick:M=>O(e.name),class:R(["drop-menu-span flex items-center justify-center w-full py-3",{isActive:e.name==s(a).path}])},[x(c,{size:"18",iconClass:e.name==s(a).path?e.icon+"2":e.icon,className:"cursor-pointer text-[20px]"},null,8,["iconClass"])],10,se)]),_:2},1032,["content"]))),128)):(l(!0),u(v,{key:1},C(s(_),e=>(l(),u(v,null,[e.children?(l(),m(s(T),{onOnSelect:g,"icon-color":"#fff","show-title":!1,key:`drop_${e.title}`,parent:e},null,8,["parent"])):(l(),m(I,{transfer:"",content:e.title,placement:"right",key:`drop_${e.title}1`,class:"w-full pb-[10px] pt-[10px]"},{default:f(()=>[w("div",{onClick:M=>O(e.name),class:R(["drop-menu-span flex items-center justify-center w-full py-3",{isActive:e.name==s(a).path}])},[x(c,{size:"18",iconClass:e.name==s(a).path?e.icon+"2":e.icon,className:"cursor-pointer text-[20px]"},null,8,["iconClass"])],10,re)]),_:2},1032,["content"]))],64))),256))],512),[[$,y.collapsed]])])}}});const ve=F(pe,[["__scopeId","data-v-3895028c"]]);export{ve as default};
