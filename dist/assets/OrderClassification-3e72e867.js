import{g as w}from"./index-64938934.js";import{g as y,aQ as x,j as u,k as L,aR as b,ag as D,o as S,m as A,n as k,aS as I,aT as O,aU as T,aV as v,aW as B}from"./vendor-a962175c.js";import"./index-11d2d6b3.js";const R=y({__name:"OrderClassification",props:{width:{default:"100%"},height:{default:"100%"},onResize:{default:()=>[0,0]},dateInfo:{default:()=>({})}},setup(f){x([I,O,T,v,B]);const c=f,p=["#2FD8FF","#FFD946","#F8635D","#3061F6","#61F5A9"];let i=null,r=[["Direct",320,302,301,334,390,330,320]],n=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],l={tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e){var t="";return Array.isArray(e)&&e.forEach(function(o){t+=o.name+": "+o.value+"<br>"}),t}},grid:{left:"3%",right:"4%",bottom:"0%",top:"18%",containLabel:!0},xAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!0,color:"#FFFFFF",fontFamily:"MicrosoftYaHei",opacity:.7,margin:18},splitLine:{show:!1}},yAxis:{type:"category",data:n,axisLabel:{show:!0,color:"#FFFFFF",fontFamily:"MicrosoftYaHei",opacity:.7,interval:0,margin:18},axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1}},series:[]};const d=()=>{i==null||i.setOption(l)},m=()=>{l.series=[];let e=[];r.forEach((t,o)=>{e.push({name:t[0],type:"bar",stack:"total",itemStyle:{color:p[o],borderRadius:[3,3,3,3]},emphasis:{focus:"series"},barWidth:"64%",data:t.slice(1)})}),l.series=e,setTimeout(()=>{d()},50)},h=async(e,t)=>{await w({projectId:106,fieldId:22,dtFrom:e,dtTo:t}).then(o=>{const F=o.reduce((a,s)=>(s.name&&(a[s.name]=(a[s.name]||0)+1),a),{});n=Object.entries(F).sort(([,a],[,s])=>a-s).slice(0,6).map(([a])=>a),r=[[""]],n.forEach(a=>{a==="null"&&(a=null);let s=o.find(g=>g.name===a);s&&r[0].push(s.count)}),l.yAxis={data:n},m()})};return u(()=>c.onResize,()=>{i==null||i.resize()}),u(()=>c.dateInfo,({start:e,end:t})=>{e&&t&&h(new Date(e).toLocaleDateString(),new Date(t).toLocaleDateString())},{immediate:!0,deep:!0}),L(()=>{i=b(document.getElementById("OrderClassification")),d()}),D(()=>{i==null||i.dispose()}),(e,t)=>(S(),A("div",{id:"OrderClassification",style:k({width:e.width,height:e.height})},null,4))}});export{R as default};
