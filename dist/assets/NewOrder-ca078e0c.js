import{i as I}from"./index-4585b2cf.js";import{g as O,h as o,k as b,G as N,ag as S,o as v,m as _,J as C,K as $,n as B,p as u,t as h,ai as D,U as T}from"./vendor-a962175c.js";import{_ as U}from"./index-11d2d6b3.js";const W=["src"],j={class:"absolute left-[25px] font-['Impact'] text-white text-xs"},E=["title"],M={class:"opacity-50 text-white"},P=O({__name:"NewOrder",setup(V){const a=o([]),d=o([]),i=o(0),p=o(null),l=o(null);let r=null,f=null;const m=async()=>{const e=await I({projectId:106,count:10});e.forEach((s,t)=>{s.index=t,s.dateCreated="["+D().format("LL")+"]"}),a.value=e},g=()=>{i.value=0,setTimeout(()=>{if(l.value)for(let e=0;e<l.value.length;e++){const s=l.value[e];s.style.transition="none",s.style.transform="translateY(0px)"}},500)},x=()=>{if(p.value&&p.value.clientHeight>=a.value.length*60){d.value=[...a.value];return}d.value=[...a.value,...a.value],r&&clearInterval(r),r=setInterval(()=>{if(i.value++,l.value)for(let e=0;e<l.value.length;e++){const s=l.value[e];s.style.transition="transform 0.5s ease",s.style.transform=`translateY(-${i.value*60}px)`}i.value==a.value.length&&g()},2e3)},y=(e,s)=>{let t=0;function n(){if(t<e.length){const c=new SpeechSynthesisUtterance,k=t==0?`您有${e.length}条新增工单${e.length?"分别":""}是：`:"";c.text=k+e[t],c.voice=speechSynthesis.getVoices()[0],speechSynthesis.speak(c),c.onend=function(){t++,setTimeout(n,s)}}}n()},w=e=>{y(e,500),a.value=a.value.map((s,t)=>({...s,index:t})),g(),x()},L=()=>{f=setTimeout(async()=>{const s=T(a.value).map(n=>n.bugId);await m();let t=[];a.value.map(n=>{s.includes(n.bugId)||t.push(n.title)}),t.length&&w(t)},60*1e3)};return b(()=>{N(async()=>{await m(),x(),L()})}),S(()=>{r&&clearInterval(r),f&&clearInterval(f)}),(e,s)=>(v(),_("div",{class:"w-full h-full flex flex-col order-list-wrapper",ref_key:"listWrapper",ref:p},[(v(!0),_(C,null,$(d.value,(t,n)=>(v(),_("div",{key:n,ref_for:!0,ref_key:"orderListItem",ref:l,class:"item flex justify-start items-center relative",style:B({animationDuration:`${a.value.length*1}s`,animationDelay:`-${n*1}s`})},[u("img",{src:"static/img/dashboard_fx_"+(t.index==0?"red":"blue")+".png",alt:""},null,8,W),u("span",j,h(t.index?t.index+1:1),1),u("p",{class:"wrap flex-1 opacity-70 text-white",title:t.title},h(t.title),9,E),u("p",M,h(t.dateCreated),1)],4))),128))],512))}});const G=U(P,[["__scopeId","data-v-dce1b476"]]);export{G as default};
