import{_ as se,T as oe,a as le,b as d}from"./index-11d2d6b3.js";import{af as ne,h as n,i as C,k as ae,ag as ie,o as re,m as de,p as e,t as x,D as s,x as c,l,n as Y,ah as ce,N as u,ai as f,G as P}from"./vendor-a962175c.js";import{_ as ue,a as _e,g as fe,b as ve}from"./index-4585b2cf.js";const pe={class:"main"},me={class:"time-wrapper"},he={class:"mr-3"},xe={class:"mr-3"},ge={class:"date-select-wrapper"},we={class:"datepicker"},Ie={class:"date text-white mr-5",href:"javascript:void(0)"},be={class:"grid grid-cols-7 grid-rows-1 h-full w-full content px-3"},ye={class:"col-start-1 col-end-3 grid grid-rows-3 grid-cols-1 h-full"},De={class:"pb-3"},Ee={class:"pb-3"},Oe={class:"pb-3"},Re={class:"col-start-3 col-end-6 grid grid-rows-5 grid-cols-1 h-full"},Te={class:"row-start-1 row-end-2 pb-3 px-3 w-full"},Ve={class:"grid grid-rows-[minmax(0,50px)_1fr_minmax(0,20px)] gridrow"},ze={class:"row-start-2 flex"},ke={class:"flex-1 flex flex-col items-center justify-end"},Ne={class:"flex-1 flex flex-col items-center justify-end relative order-count-middle"},Se={class:"text-[48px] text-[#fff] font-[Impact]"},Le={class:"flex-1 flex flex-col items-center justify-end"},He={class:"text-[48px] text-[#fff] font-[Impact]"},Ae={class:"row-start-2 row-end-4 pb-3 px-3 flex"},Ce={class:"flex-1"},Ye={class:"flex-1"},Pe={class:"row-start-4 row-end-6 pb-3 px-3"},Be={class:"pb-3"},Me={class:"pb-3"},je={class:"pb-3"},Fe={class:"pl-4"},$e=["innerHTML"],We={beforeRouteEnter(I,r,h){localStorage.getItem(oe)?h():h("/sp/login?redirect="+I.path)}},Ke=Object.assign(We,{__name:"index",setup(I){const r=u(()=>d(()=>import("./BoxWrapper-f2d10ea0.js"),["assets/BoxWrapper-f2d10ea0.js","assets/dashboard_fx_box_icon-423c0060.js","assets/vendor-a962175c.js","assets/vendor-9f745663.css","assets/index-11d2d6b3.js","assets/index-b7f84b08.css","assets/BoxWrapper-450aa03b.css"])),h=u(()=>d(()=>import("./OrderClassification-3da9220f.js"),["assets/OrderClassification-3da9220f.js","assets/index-4585b2cf.js","assets/index-11d2d6b3.js","assets/vendor-a962175c.js","assets/vendor-9f745663.css","assets/index-b7f84b08.css"])),B=u(()=>d(()=>import("./OrderStatus-01219647.js"),["assets/OrderStatus-01219647.js","assets/index-4585b2cf.js","assets/index-11d2d6b3.js","assets/vendor-a962175c.js","assets/vendor-9f745663.css","assets/index-b7f84b08.css"])),M=u(()=>d(()=>import("./OrderSolutionInfo-d27170ac.js"),["assets/OrderSolutionInfo-d27170ac.js","assets/index-4585b2cf.js","assets/index-11d2d6b3.js","assets/vendor-a962175c.js","assets/vendor-9f745663.css","assets/index-b7f84b08.css"])),j=u(()=>d(()=>import("./OrderTimeDistribution-301bf65b.js"),["assets/OrderTimeDistribution-301bf65b.js","assets/index-4585b2cf.js","assets/index-11d2d6b3.js","assets/vendor-a962175c.js","assets/vendor-9f745663.css","assets/index-b7f84b08.css"])),F=u(()=>d(()=>import("./HotStop-c637075d.js"),["assets/HotStop-c637075d.js","assets/index-4585b2cf.js","assets/index-11d2d6b3.js","assets/vendor-a962175c.js","assets/vendor-9f745663.css","assets/index-b7f84b08.css"])),$=u(()=>d(()=>import("./DepartRadar-89b76687.js"),["assets/DepartRadar-89b76687.js","assets/index-4585b2cf.js","assets/index-11d2d6b3.js","assets/vendor-a962175c.js","assets/vendor-9f745663.css","assets/index-b7f84b08.css"])),W=u(()=>d(()=>import("./OrderSource-dc64c8ed.js"),["assets/OrderSource-dc64c8ed.js","assets/index-4585b2cf.js","assets/index-11d2d6b3.js","assets/vendor-a962175c.js","assets/vendor-9f745663.css","assets/index-b7f84b08.css"])),K=u(()=>d(()=>import("./NewOrder-ca078e0c.js"),["assets/NewOrder-ca078e0c.js","assets/index-4585b2cf.js","assets/index-11d2d6b3.js","assets/vendor-a962175c.js","assets/vendor-9f745663.css","assets/index-b7f84b08.css","assets/NewOrder-1d9dab11.css"])),{toggle:U}=ne();let b=null;const y=n(0),D=n(0),E=n(0),O=n(""),R=n(""),T=n(""),V=n(null),z=n(null),_=n([0,0]);n(!1);const m=n([]),g=n("请选择"),k=n(""),w=n(null),N=n(null),G=n(null),a=C(()=>{const o=f(m.value[0]).format("YYYY-MM-DD"),t=f(m.value[1]).format("YYYY-MM-DD");return[o,t]}),v=C(()=>{const o=a.value[0].split("-")[0],t=a.value[0].split("-")[1].slice(0,1)==0?a.value[0].split("-")[1].slice(1):a.value[0].split("-")[1],p=a.value[1].split("-")[0],i=a.value[1].split("-")[1].slice(0,1)==0?a.value[1].split("-")[1].slice(1):a.value[1].split("-")[1];return{yearFrom:Number(o),monthFrom:Number(t),yearTo:Number(p),monthTo:Number(i),start:f(a.value[0]).format(),end:f(a.value[1]).format()}}),q=()=>{g.value=`${a.value[0]}    -    ${a.value[1]}`},J=async()=>{let o=a.value[1].split("-");const t=await fe({projectId:106,year:Number(o[0]),month:Number(o[1]),day:Number(o[2])});y.value=t.countOfCrntYear,D.value=t.countOfCrntMonth,E.value=t.countOfCrntWeek},Q=async()=>{const o=await ve({projectId:106,strItemIDs:101041}),t=new RegExp(`\r
`,"g");k.value=o[0].settingNote.replaceAll(t,"<br/>")},S=()=>{P(()=>{var p;let o=((p=w.value)==null?void 0:p.clientHeight)/3-120;V.value=o+"px";const t=setInterval(()=>{const i=N.value;i&&(clearInterval(t),i.clientHeight>o?i.style.animationDuration=`${i.scrollHeight/10}s`:i.style.animation="none")},500)})},L=()=>{P(()=>{var t;let o=((t=w.value)==null?void 0:t.clientHeight)/5*2-100;z.value=o+"px"})},H=()=>{S(),L(),_.value=[window.innerWidth,window.innerHeight]},X=()=>{const o=new Date,t=new Date;t.setFullYear(t.getFullYear()-1),m.value=[t,o],g.value=`${a.value[0]}    -    ${a.value[1]}`},Z=()=>U(),A=()=>{f.locale("zh-cn"),O.value=f().format("LL"),R.value=f().format("dddd"),T.value=f().format("LTS")},ee=async()=>{X(),A(),b=setInterval(()=>{A()},1e3),S(),L(),window.addEventListener("resize",H),Q(),J()};return ae(()=>{ee()}),ie(()=>{clearInterval(b),window.removeEventListener("resize",H)}),(o,t)=>{const p=ce,i=le;return re(),de("div",pe,[e("div",me,[e("span",he,x(O.value),1),e("span",xe,x(R.value),1),e("span",null,x(T.value),1)]),e("div",ge,[e("div",we,[t[1]||(t[1]=e("span",{class:"mr-3 range text-[#5de5fd]"},"选择范围",-1)),e("a",Ie,x(g.value),1)]),s(p,{ref_key:"datepicker",ref:G,modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=te=>m.value=te),confirm:"",transfer:"",allowClear:!1,type:"daterange",style:{opacity:0,cursor:"pointer"},onChange:q},null,8,["modelValue"]),e("img",{class:"w-[20px] cursor-pointer",src:ue,alt:"",onClick:Z})]),t[5]||(t[5]=e("div",{class:"title flex justify-center"},[e("img",{class:"w-[320px] mt-4",src:_e,alt:""})],-1)),e("div",be,[e("div",ye,[e("div",De,[s(l(r),{title:"工单解决情况"},{default:c(()=>[s(l(M),{dateInfo:v.value,onResize:_.value},null,8,["dateInfo","onResize"])]),_:1})]),e("div",Ee,[s(l(r),{title:"工单分配情况"},{default:c(()=>[s(l(B),{dateInfo:v.value,onResize:_.value},null,8,["dateInfo","onResize"])]),_:1})]),e("div",Oe,[s(l(r),{title:"热点故障"},{default:c(()=>[s(l(F),{dateInfo:v.value,onResize:_.value},null,8,["dateInfo","onResize"])]),_:1})])]),e("div",Re,[e("div",Te,[e("div",Ve,[e("div",ze,[e("div",ke,[t[2]||(t[2]=e("p",{class:"text-[18px] text-[#5de5fd] font-[Adobe_Heiti_Std]"}," 本年度工单数量 ",-1)),s(i,{startVal:0,endVal:y.value,duration:800,class:"text-[48px] text-[#fff] font-[Impact]"},null,8,["endVal"])]),e("div",Ne,[t[3]||(t[3]=e("p",{class:"text-[18px] text-[#5de5fd] font-[Adobe_Heiti_Std]"}," 本月工单提交数量 ",-1)),e("p",Se,[s(i,{startVal:0,endVal:D.value,duration:800,class:"text-[48px] text-[#fff] font-[Impact]"},null,8,["endVal"])])]),e("div",Le,[t[4]||(t[4]=e("p",{class:"text-[18px] text-[#5de5fd] font-[Adobe_Heiti_Std]"}," 本周工单提交数量 ",-1)),e("p",He,[s(i,{startVal:0,endVal:E.value,duration:800,class:"text-[48px] text-[#fff] font-[Impact]"},null,8,["endVal"])])])])])]),e("div",Ae,[e("div",Ce,[s(l(r),{title:"部门占比",hideBg:!0},{default:c(()=>[s(l($),{onResize:_.value,dateInfo:v.value},null,8,["onResize","dateInfo"])]),_:1})]),e("div",Ye,[s(l(r),{title:"工单来源渠道分析",hideBg:!0},{default:c(()=>[s(l(W),{onResize:_.value,dateInfo:v.value},null,8,["onResize","dateInfo"])]),_:1})])]),e("div",Pe,[s(l(r),{title:"最近新增工单",hideBg:!0},{default:c(()=>[s(l(K),{class:"overflow-hidden",style:Y({height:z.value})},null,8,["style"])]),_:1})])]),e("div",{class:"col-start-6 col-end-8 grid grid-rows-3 grid-cols-1 h-full",ref_key:"rightBox",ref:w},[e("div",Be,[s(l(r),{title:"工单时间分布"},{default:c(()=>[s(l(j),{dateInfo:v.value,onResize:_.value},null,8,["dateInfo","onResize"])]),_:1})]),e("div",Me,[s(l(r),{title:"工单分类"},{default:c(()=>[s(l(h),{dateInfo:v.value,onResize:_.value},null,8,["dateInfo","onResize"])]),_:1})]),e("div",je,[s(l(r),{title:"系统公告"},{default:c(()=>[e("div",Fe,[e("div",{class:"notice-wrapper opacity-80 text-white overflow-hidden relative",style:Y({height:V.value})},[e("div",{ref_key:"notice",ref:N,class:"notice",innerHTML:k.value},null,8,$e)],4)])]),_:1})])],512)])])}}}),Je=se(Ke,[["__scopeId","data-v-b62bbc6d"]]);export{Je as default};
