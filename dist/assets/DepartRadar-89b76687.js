import{f as g}from"./index-4585b2cf.js";import{g as h,aQ as w,j as u,k as S,aR as R,ag as B,o as b,m as v,n as y,b0 as A,aS as G,aU as x,b1 as I,b2 as O,b3 as D,aW as $}from"./vendor-a962175c.js";import"./index-11d2d6b3.js";const L=h({__name:"DepartRadar",props:{width:{default:"100%"},height:{default:"100%"},radius:{default:"50%"},onResize:{default:()=>[0,0]},dateInfo:{default:()=>({})}},setup(f){w([A,G,x,I,O,D,$]);const i=f;let r=[],s=[],e=null,o={color:["rgba(49, 98, 250, 1)"],legend:{show:!1},tooltip:{trigger:"item"},radar:{indicator:[{name:"北京泰克赛尔",max:100},{name:"官网",max:100},{name:"官网",max:100},{name:"苏州云可达",max:100},{name:"官网",max:100},{name:"官网",max:100}],center:["50%","50%"],radius:i.radius,splitLine:{lineStyle:{color:["RGBA(15, 75, 168, 1)","RGBA(15, 75, 168, .8)","RGBA(15, 75, 168, .6)","RGBA(15, 75, 168, .4)","RGBA(15, 75, 168, .2)","RGBA(15, 75, 168, .1)"].reverse()}},splitArea:{areaStyle:{color:["rgba(7,24,100, .6)"]}},axisLine:{lineStyle:{color:"RGBA(15, 75, 168, 1)"}},axisName:{color:"#fff",backgroundColor:"rgba(0,0,0,0)",padding:[-8,-8]}},series:[{type:"radar",data:[{value:[55,65,75,80,45,90],name:"部门占比",lineStyle:{width:0},areaStyle:{color:"RGBA(10, 44, 127, 1)"},label:{show:!1,formatter:function(a){return a.value},color:"#fff"}}]}]},d={tooltip:{trigger:"item"},legend:{left:"center",itemWidth:15,itemHeight:15,textStyle:{color:"#fff"}},series:[{type:"pie",radius:"50%",data:[{value:1048,name:"Search Engine"},{value:735,name:"Direct"},{value:580,name:"Email"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{color:"#fff",formatter(a){return a.name+"("+a.value+")"}}}]};const c=async({start:a,end:n})=>{const l=await g({projectId:106,fieldId:10001,dtTo:new Date(new Date(n).getTime()+288e5).toISOString(),dtFrom:new Date(new Date(a).getTime()+288e5).toISOString()});if(l.length!==0){if(l.length<3){d.series=[{data:l.map(t=>({value:t.count,name:t.name}))}],p();return}r=l.map(t=>({name:t.name})),s=l.map(t=>t.count),o.radar&&(o.radar={indicator:r}),o.series=[{data:[{value:s,name:"部门占比",lineStyle:{width:0},areaStyle:{color:"RGBA(10, 44, 127, 1)"},label:{show:!1,formatter:function(t){return t.value},color:"#fff"}}]}],m()}},m=()=>{e==null||e.setOption(o)},p=()=>{e==null||e.setOption(d)};return u(()=>i.onResize,()=>{e==null||e.resize()}),u(()=>i.dateInfo,({start:a,end:n})=>{a&&n&&c({start:a,end:n})},{immediate:!0}),S(()=>{e=R(document.getElementById("departRadar")),m()}),B(()=>{e==null||e.dispose()}),(a,n)=>(b(),v("div",{id:"departRadar",style:y({width:a.width,height:a.height})},null,4))}});export{L as default};
