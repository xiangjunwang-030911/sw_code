import{h as j,b as A}from"./index-11d2d6b3.js";import{g as B,aq as K,ap as b,h as t,aA as N,j as W,k as $,o as r,m as i,z as q,l as o,n as F,D as c,x as v,J as M,K as G,c as H,p as J,L as O,N as U,ax as Y,au as Q,a4 as X,A as Z}from"./vendor-a962175c.js";import{u as ee}from"./useTableMaxHeight-bf759a94.js";import{u as te}from"./knowledge-a2b5aa7f.js";import{u as oe}from"./service-0e8ab2f5.js";import{b as ae}from"./index-162d97de.js";import"./index-8a0f43b8.js";const se={class:"mt-4"},ne={class:"flex justify-center"},me=B({__name:"ListView",props:{search:{}},setup(w,{expose:h}){const k=U(()=>A(()=>import("./GridItem-9477c66b.js"),["assets/GridItem-9477c66b.js","assets/index-11d2d6b3.js","assets/vendor-a962175c.js","assets/vendor-9f745663.css","assets/index-b7f84b08.css"])),C=K(),I=b(),S=j(),x=w,u=t(0),d=t(),L=oe(),y=te(),{currentFolderId:p}=N(y),g=t([]),a=t(1),m=t(10),_=t(0),l=t(!1),z=e=>{m.value=e,s()},R=e=>{a.value=e,s()},s=async()=>{l.value=!0;const e=await ae({projectId:L.getKnowledgeProjectId,pageIndex:a.value,pageSize:m.value,keyWords:x.search,folderIds:[p.value],ownerIds:[],fieldIds:[],sortBy:0});g.value=e.knowledgeItems,_.value=e.totalCount,l.value=!1},V=e=>{C.push({path:"/ep/knowledge/details",query:{id:e.knowledgeID}}).then(()=>{S.addTagsViewList({title:`知识库-${e.knowledgeID}`,name:`/ep/knowledge/details?id=${e.knowledgeID}`,meta:I.meta})})};return W(()=>p.value,()=>{s()}),$(()=>{ee(u,d.value),s()}),h({getKnowledgeList:s}),(e,f)=>{const D=Y,E=Q,P=X,T=Z;return r(),i("div",se,[q((r(),i("div",{ref_key:"gridWrapperRef",ref:d,class:"pl-1 pt-1",style:F({height:o(u)-55+"px",overflowY:"auto"})},[c(E,null,{default:v(()=>[(r(!0),i(M,null,G(o(g),n=>(r(),H(D,{lg:8,md:12},{default:v(()=>[c(o(k),{class:"mr-3 mb-4 cursor-pointer",item:n,onClick:re=>V(n)},null,8,["item","onClick"])]),_:2},1024))),256))]),_:1})],4)),[[T,o(l)]]),J("div",ne,[c(P,{"current-page":o(a),"onUpdate:currentPage":f[0]||(f[0]=n=>O(a)?a.value=n:null),"page-sizes":[10,20,30,50],layout:"total, sizes, prev, pager, next, jumper",total:o(_),onSizeChange:z,onCurrentChange:R},null,8,["current-page","total"])])])}}});export{me as default};
