import{r as f,o as h,j as o,b as v}from"./index-11d2d6b3.js";import{g as B,h as _,ak as C,k as M,o as O,m as F,D as y,l as E,N as D,av as P}from"./vendor-a962175c.js";function A(a,i="modal"){const n={projectId:a};return f.get({url:"api/EmployeeGuiSetting/EmployeeGuiSetting",params:n},{errorMessageMode:i})}function N(a,i,n,r="modal"){const u={projectId:a,itemId:i,strFieldIds:n};return f.get({url:"api/EmployeeInfo/EmployeeItemValues",params:u},{errorMessageMode:r})}function U(a,i,n,r="modal"){const u={projectId:a,itemId:i};return f.post({url:"api/EmployeeInfo/SetEmployeeItemValues",params:u,data:n},{errorMessageMode:r})}function k(a){return f.get({url:"api/EmployeeInfo/AssetInfoList",params:a},{isTransformResponse:!1})}const V={class:"custom-content scrollBar-light px-3 pt-3"},X=B({__name:"index",setup(a){const i=D(()=>v(()=>import("./InfoForm-709f1f3e.js"),["assets/InfoForm-709f1f3e.js","assets/index-11d2d6b3.js","assets/vendor-a962175c.js","assets/vendor-9f745663.css","assets/index-b7f84b08.css","assets/index.vue_vue_type_script_setup_true_lang-0d69b02f.js","assets/service-0e8ab2f5.js","assets/index-8a0f43b8.js"])),n=D(()=>v(()=>import("./InfoAssets-ed735f4e.js"),["assets/InfoAssets-ed735f4e.js","assets/vendor-a962175c.js","assets/vendor-9f745663.css","assets/index-11d2d6b3.js","assets/index-b7f84b08.css"])),r=h(),u=_(!1),m=_([]),d=_([]),I=C({}),T=async()=>{u.value=!0;const{fields:c,pageNames:p,fieldsOnPage:t}=await A(r.getBaseProjectId);m.value=c;const l=P(t,"uiFieldID");d.value=l.filter(s=>s.guiPageID===p[0].id).sort((s,e)=>s.tabOrder-e.tabOrder).map(s=>{const e=m.value.find(g=>g.fieldID===s.uiFieldID);return s.fieldTypeID=e==null?void 0:e.fieldTypeID,e!=null&&e.attributes&&e.fieldID===o.MULTILINE_EDIT_BOX&&(s.SupportHTMLFormat=e.attributes.SupportHTMLFormat),((e==null?void 0:e.fieldTypeID)===o.COMBOBOX||(e==null?void 0:e.fieldTypeID)===o.DROPDOWN_LIST||(e==null?void 0:e.fieldTypeID)===o.MULTIPLE_SELECTION_LISTBOX||(e==null?void 0:e.fieldTypeID)===o.CHECKBOX)&&(s.listChoice=e.listChoice),s}),L()},L=async()=>{let c=d.value.reduce((t,l)=>t+l.uiFieldID+",","");c=c.substring(0,c.length-1);const p=await N(r.getBaseProjectId,r.getUserId,c);u.value=!1,d.value.map(t=>{var l;if(t.fieldTypeID===o.CHECKBOX||t.fieldTypeID===o.MULTIPLE_SELECTION_LISTBOX){const s=p.filter(e=>e.fieldId===t.uiFieldID);s.length?t.value=s.join(","):t.value=""}else{const s=p.find(e=>e.fieldId===t.uiFieldID);if(s)if(s.choiceId)t.value=s.choiceId;else{const e=(l=t.listChoice)==null?void 0:l.find(g=>g.name===s.value);t.value=e?e.id:s.value}else t.value=""}return t}),d.value.forEach(t=>{t.fieldTypeID===o.CHECKBOX||t.fieldTypeID===o.MULTIPLE_SELECTION_LISTBOX?t.value&&typeof t.value=="string"?I[t.uiFieldID]=t.value.split(",").map(l=>Number(l)):I[t.uiFieldID]=[]:I[t.uiFieldID]=t.value||""})},S=()=>{T()};return M(()=>{S()}),(c,p)=>(O(),F("div",V,[y(E(i),{"field-list":m.value,"field-list-data":d.value,"is-loading":u.value,"form-list":E(I)},null,8,["field-list","field-list-data","is-loading","form-list"]),y(E(n))]))}}),G=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));export{k as g,G as i,U as s};
